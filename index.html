<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>JavaScript Piano</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <!-- <script type="text/javascript" src="scripts.js"></script> -->
  </head>
  <body>

    <div class="keys">
      <div data-key="65" class="key hexagon">
        <kbd>C</kbd>
        <span class="sound">a</span>
      </div>
      <div data-key="83" class="key hexagon">
        <kbd>D</kbd>
        <span class="sound">s</span>
      </div>
      <div data-key="68" class="key hexagon">
        <kbd>E<dd></dd></kbd>
        <span class="sound">d</span>
      </div>
      <div data-key="70" class="key hexagon">
        <kbd>F</kbd>
        <span class="sound">f</span>
      </div>
      <div data-key="74" class="key hexagon">
        <kbd>G</kbd>
        <span class="sound">j</span>
      </div>
      <div data-key="75" class="key hexagon">
        <kbd>A</kbd>
        <span class="sound">k</span>
      </div>
      <div data-key="76" class="key hexagon">
        <kbd>B</kbd>
        <span class="sound">l</span>
      </div>
      <div data-key="186" class="key hexagon">
        <kbd>C</kbd>
        <span class="sound">;</span>
      </div>
    </div>

    <audio data-key="65" src="sounds/Piano.ff.C4.wav"></audio>
    <audio data-key="83" src="sounds/Piano.ff.D4.wav"></audio>
    <audio data-key="68" src="sounds/Piano.ff.E4.wav"></audio>
    <audio data-key="70" src="sounds/Piano.ff.F4.wav"></audio>
    <audio data-key="74" src="sounds/Piano.ff.G4.wav"></audio>
    <audio data-key="75" src="sounds/Piano.ff.A4.wav"></audio>
    <audio data-key="76" src="sounds/Piano.ff.B4.wav"></audio>
    <audio data-key="186" src="sounds/Piano.ff.C5.wav"></audio>

    <script>
      function removeTransition(e) {
        if (e.propertyName !== 'transform') return;
        e.target.classList.remove('playing');
      }

      function playSound(e) {
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        const key = document.querySelector(`div[data-key="${e.keyCode}"]`);
        if (!audio) return;

        console.log(e);
        key.classList.add('playing');
        audio.currentTime = 0;
        audio.play();
      }

      const keys = Array.from(document.querySelectorAll('.key'));
      keys.forEach(key => key.addEventListener('transitionend', removeTransition));
      window.addEventListener('keydown', playSound);
    </script>
  </body>
</html>

<!-- NOTE: Could not console.log(e.keyCode) -->

<!-- IDEA: Change keys -->
<!-- IDEA: Fully chromatic -->
<!-- IDEA: Alternate tunings -->
<!-- IDEA: Add octave switch keys -->
